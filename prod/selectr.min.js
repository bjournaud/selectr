(function(){!function(a){var b;return b=function(){function b(b,c){var d,e,f,g,h;for(this.el=b,this.args=c,this.$el=a(b),this.args=a.extend(this.defaults,this.args,this.$el.data("selectr-opts")),this.$el.data("selectr-opts",this.args),this.container=this.CreateContainer(),this.opts=this.PrepareOpts(a("option",this.el)),a(".list-group",this.container).append(this.opts),e=0,h=this.opts,f=0,g=h.length;g>f;f++)d=h[f],d.hasClass("selected")&&e++;a(".current-selection",this.container).text(e>0?e:void 0),0===e&&a(".panel-footer",this.container).addClass("hidden"),this.MonitorSource(),this.container.insertAfter(this.el),this.$el.hide()}return b.prototype.defaults={Selectr:b,title:"Select Options",placeholder:"Search",resetText:"Clear All",width:"300px",maxListHeight:"250px",tooltipBreakpoint:25,maxSelection:0/0},b.prototype.CreateContainer=function(){return a(document.createElement("div")).attr({"class":"selectr panel panel-default "+(this.$el.prop("multiple")?"multi":void 0),style:"width: "+this.args.width+";"}).html("<div class='panel-heading "+(""===this.args.title?"no-title":void 0)+"'>\n  <h4 class='panel-title'>\n    "+this.args.title+"\n  </h4>\n</div>\n<div class='panel-body'>\n  <input class='form-control' placeholder='"+this.args.placeholder+"'>\n  <span class='clear-search hidden'>&times;</span>\n</div>\n<ul class='list-group' style='max-height: "+this.args.maxListHeight+"'>\n</ul>\n<div class='panel-footer "+(this.$el.prop("multiple")?void 0:"hidden")+"'>\n  <button class='reset btn btn-sm btn-default'>\n    "+this.args.resetText+"\n  </button>\n  "+(this.$el.prop("multiple")?"<span class='current-selection badge'></span>":void 0)+"\n</div>")},b.prototype.PrepareOpts=function(b){var c,d,e,f;for(f=[],d=0,e=b.length;e>d;d++)c=b[d],f.push(a(document.createElement("li")).attr({"class":"list-group-item "+(c.selected?"selected":"")}).data("val",a(c).val()).append(a(document.createElement("div")).attr({"class":"color-code "+(a(c).data("selectr-color")?void 0:"no-color")}).css("background-color",a(c).data("selectr-color"))).append(a(document.createElement("div")).text(a(c).text()).attr({"class":"option-name",title:a(c).text().length>this.args.tooltipBreakpoint?a(c).text():void 0})).append(a(document.createElement("div")).html("&times").attr({"class":"add-remove "+(this.$el.prop("multiple")?void 0:"hidden")})));return f},b.prototype.MonitorSource=function(){var b;return b=this,this.$el.on("change",function(){var c,d,e;return a(this).data("selectr-change-triggered")?void 0:(e=a(document.createElement("ul")).attr({"class":"list-group",style:"max-height: "+b.args.maxListHeight+";"}),d=b.PrepareOpts(a("option",this)),e.append(d),a(".list-group",a(this).next()).replaceWith(e),c=a("option:selected",this).length,a(".current-selection",a(this).next()).text(c>0?c:""),c>0&&a(this).prop("multiple")?a(".panel-footer",a(this).next()).removeClass("hidden"):a(".panel-footer",a(this).next()).addClass("hidden"))})},b.TriggerChange=function(a){return a.data("selectr-change-triggered",!0),a.trigger({type:"change"}),a.data("selectr-change-triggered",!1)},b.SelectOption=function(b,c){var d,e,f,g,h,i;if(e=a(c).parents(".selectr").prev(),!(a(e).data("selectr-opts").maxSelection<=a(c).siblings(".selected").length&&b)){if(!b)for(a("option",e).prop("selected",!1),i=a(c).siblings(),g=0,h=i.length;h>g;g++)f=i[g],a(f).removeClass("selected");return a(c).addClass("selected"),a("option[value="+a(c).data("val")+"]",e).prop("selected",!0),d=a("option:selected",e).length,a(".current-selection",a(c).parents(".selectr")).text(d>0?d:""),e.prop("multiple")&&a(".panel-footer",a(c).parents(".selectr")).removeClass("hidden"),d===a(e).data("selectr-opts").maxSelection?a(c).parents(".selectr").addClass("max-selection-reached"):a(c).parents(".selectr").removeClass("max-selection-reached"),this.TriggerChange(e)}},b.DeselectOption=function(b){var c,d;return d=a(b).parents(".selectr").prev(),a(b).parents(".selectr").removeClass("max-selection-reached"),a(b).removeClass("selected"),a("option[value="+a(b).data("val")+"]",d).prop("selected",!1),c=a("option:selected",d).length,a(".current-selection",a(b).parents(".selectr")).text(c>0?c:""),0===c&&a(".panel-footer",a(b).parents(".selectr")).addClass("hidden"),this.TriggerChange(d)},b.bindingsInitialized=!1,b.InstallBindings=function(){return b.bindingsInitialized?void 0:(a(document).on("click",".selectr .list-group-item",function(c){var d,e;if(!c.originalEvent.detail||2!==c.originalEvent.detail)return d=a(this).parents(".selectr").prev(),e=(c.ctrlKey||c.metaKey)&&d.prop("multiple"),a(this).hasClass("selected")&&(e||0===a(this).siblings(".selected").length)&&d.prop("multiple")?b.DeselectOption(this):b.SelectOption(e,this),c.stopPropagation(),c.preventDefault(),a(document).on("keydown",function(b){return b.ctrlKey?a(".selectr .list-group").addClass("ctrl-key"):void 0}),a(document).on("keyup",function(b){return b.ctrlKey?void 0:a(".selectr .list-group").removeClass("ctrl-key")})}),a(document).on("click",".selectr .add-remove",function(c){var d;if(!c.originalEvent.detail||2!==c.originalEvent.detail)return d=a(c.target).parents(".selectr .list-group-item"),d.hasClass("selected")?b.DeselectOption(d):b.SelectOption(!0,d),c.stopPropagation(),c.preventDefault()}),a(document).on("click change keyup",".selectr .form-control",function(b){var c,d;return d=a(this).parents(".selectr"),c=new RegExp(a(this).val().replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),"i"),a(".list-group-item",d).each(function(b,d){return a(d).text().match(c)?a(d).removeClass("hidden"):a(d).addClass("hidden")}),a(this).val().length>0?a(".clear-search",d).removeClass("hidden"):a(".clear-search",d).addClass("hidden"),b.stopPropagation(),b.preventDefault()}),a(document).on("click",".selectr .clear-search",function(b){return a(this).siblings("input").val("").click(),b.stopPropagation(),b.preventDefault()}),a(document).on("click",".selectr .reset",function(c){var d;return d=a(this).parents(".selectr").prev(),a(this).parents(".selectr").find("ul > li").removeClass("selected"),a("option",d).prop("selected",!1),b.TriggerChange(d),a(".current-selection",a(this).parents(".selectr")).text(""),a(".panel-footer",a(this).parents(".selectr")).addClass("hidden"),c.stopPropagation(),c.preventDefault()}),b.bindingsInitialized=!0)},b}(),a.fn.extend({selectr:function(c){return this.each(function(){var d,e;return d=a(this),e=d.data("selectr"),e?void 0:d.data("selectr",e=new b(this,c))}),b.InstallBindings()}})}($,window)}).call(this);